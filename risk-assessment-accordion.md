# 기술개발 요청 아코디언 구조 변경 위험 요소 체크리스트

## 📋 요구사항 정리
1. **기존 요청들** → "1차 개발요청" 아코디언 (펼침/접기 가능)
2. **신규 요청들** → "2차 개발요청" 아코디언 (자동으로 쌓임)

## ⚠️ 위험 요소 분석

### 1. 데이터 분류 기준 문제 ⚠️ **중요**
**위험도: 높음**
- **문제**: 기존 요청과 신규 요청을 구분할 명확한 기준이 없음
- **영향**: 
  - 언제부터가 "신규"인지 정의 필요
  - 기존 데이터가 잘못 분류될 수 있음
- **해결 방안**:
  - 옵션 A: `generation` 필드 추가 (1차/2차 구분)
  - 옵션 B: 특정 날짜 기준으로 분류 (예: 2024-12-XX 이후 = 2차)
  - 옵션 C: Firebase 경로 분리 (`/requests/기술개발요청/1차/`, `/requests/기술개발요청/2차/`)

**권장**: 옵션 A (generation 필드) - 가장 안전하고 확장 가능

### 2. 기존 데이터 마이그레이션 필요 ⚠️ **중요**
**위험도: 높음**
- **문제**: 기존 데이터에 generation 필드가 없음
- **영향**: 
  - 기존 요청들이 모두 1차로 표시되어야 함
  - 마이그레이션 스크립트 필요
- **해결 방안**:
  - 기본값 설정: `generation` 필드가 없으면 "1차"로 간주
  - 기존 데이터 자동 분류 로직 추가

### 3. UI 구조 대폭 변경 ⚠️ **중간**
**위험도: 중간**
- **문제**: 테이블 구조 → 아코디언 구조로 완전 변경
- **영향**:
  - 기존 테이블 스타일/기능 유지 어려움
  - 검색, 필터링, 정렬 기능 재구현 필요
- **해결 방안**:
  - 아코디언 내부에 카드 형태로 요청 표시
  - 각 아코디언별 검색/필터링 기능 유지

### 4. 검색 기능 변경 필요 ⚠️ **중간**
**위험도: 중간**
- **문제**: 현재 `requestSearchInput`이 테이블 행을 검색
- **영향**:
  - 아코디언 구조에서는 검색 로직 변경 필요
  - 검색 결과가 어느 아코디언에 있는지 표시 필요
- **해결 방안**:
  - 검색 시 해당 아코디언 자동 펼침
  - 검색 결과 하이라이트 표시

### 5. 필터링 기능 변경 필요 ⚠️ **중간**
**위험도: 중간**
- **문제**: 현재 상태 필터가 테이블 기반
- **영향**:
  - 아코디언 구조에서 필터링 시 어느 아코디언에 표시할지 결정 필요
  - 1차/2차 구분과 상태 필터 조합 시 복잡도 증가
- **해결 방안**:
  - 필터 적용 시 해당하는 요청만 표시
  - 1차/2차 아코디언 모두 검색 범위에 포함

### 6. 정렬 기능 유지 필요 ⚠️ **낮음**
**위험도: 낮음**
- **문제**: 현재 날짜순 정렬이 명시적이지 않음
- **영향**: 최신순 정렬이 자동 적용되는지 확인 필요
- **해결 방안**:
  - 각 아코디언 내부에서 날짜 내림차순 정렬 유지
  - 최신 요청이 위로 오도록 정렬

### 7. 통계 계산 로직 영향 ⚠️ **낮음**
**위험도: 낮음**
- **문제**: 통계는 전체 요청을 카운트하므로 영향 없을 것으로 예상
- **영향**: 통계 계산 로직은 변경 불필요
- **확인 필요**: `updateStats()` 함수가 정상 동작하는지 테스트

### 8. CSV 다운로드 기능 영향 ⚠️ **중간**
**위험도: 중간**
- **문제**: `exportRequestsBtn`이 테이블 데이터를 CSV로 변환
- **영향**:
  - 아코디언 구조에서는 데이터 수집 방식 변경 필요
  - 1차/2차 구분 포함 여부 결정 필요
- **해결 방안**:
  - 아코디언에서 모든 요청 데이터 수집
  - CSV에 generation 필드 추가 (선택사항)

### 9. 실시간 업데이트 영향 ⚠️ **낮음**
**위험도: 낮음**
- **문제**: 현재는 수동 새로고침 방식
- **영향**: 실시간 업데이트 기능 추가 시 아코디언 구조에 맞게 수정 필요
- **해결 방안**: 아코디언 구조에서도 동일하게 작동하도록 구현

### 10. 모바일 반응형 대응 ⚠️ **중간**
**위험도: 중간**
- **문제**: 아코디언 구조가 모바일에서 더 나을 수 있음 (긍정적)
- **영향**: 기존 테이블보다 모바일 친화적일 가능성
- **확인 필요**: 아코디언 스타일이 모바일에서 잘 보이는지 확인

## ✅ 안전한 구현 방안

### 1단계: 데이터 구조 확장 (안전)
```javascript
// 신규 요청 저장 시
generation: '2차'  // 기본값 추가

// 기존 데이터 처리
generation: req.generation || '1차'  // 기본값으로 1차 처리
```

### 2단계: UI 변경 (점진적)
- 테이블 구조 유지하면서 아코디언 래퍼 추가
- 기존 스타일 가능한 한 유지
- CSS로 아코디언 애니메이션 추가

### 3단계: 기능 유지
- 검색/필터링 로직은 데이터 레벨에서 처리
- UI는 단순히 표시만 변경

## 🎯 권장 구현 순서

1. ✅ **데이터 분류 로직 추가** (generation 필드)
2. ✅ **기존 데이터 호환성 확인** (기본값 '1차')
3. ✅ **아코디언 UI 구조 추가** (HTML/CSS)
4. ✅ **렌더링 함수 수정** (테이블 → 아코디언)
5. ✅ **검색/필터링 로직 수정**
6. ✅ **CSV 다운로드 수정**
7. ✅ **테스트 및 검증**

## ⚡ 핵심 위험 요소 요약

1. **데이터 분류 기준 명확화 필요** ⚠️⚠️⚠️
2. **기존 데이터 마이그레이션 필요** ⚠️⚠️⚠️
3. **검색/필터링 로직 재구현 필요** ⚠️⚠️
4. **UI 구조 대폭 변경** ⚠️⚠️

## 💡 추가 고려사항

- **성능**: 아코디언이 많아지면 렌더링 성능 고려
- **접근성**: 키보드 네비게이션 지원 필요
- **사용자 경험**: 아코디언 펼침/접기 상태 기억 여부

